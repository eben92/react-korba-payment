{"version":3,"file":"index.js","sources":["../libs/use-x-checkout.tsx"],"sourcesContent":["'use client';\r\n\r\nimport {useEffect, useRef} from 'react';\r\nimport type {TXCheckoutRefProps, ICheckoutHooksProps, TUseXCheckoutProps} from './types';\r\n\r\nexport default function useXCheckout({config, scriptSrc}: TUseXCheckoutProps): ICheckoutHooksProps {\r\n  const xcheckoutRef = useRef<TXCheckoutRefProps | null>(null);\r\n\r\n  useEffect(() => {\r\n    const script = document.createElement('script');\r\n    script.src = scriptSrc;\r\n    script.async = true;\r\n    script.onload = () => {\r\n      xcheckoutRef.current = window.XCheckout;\r\n      xcheckoutRef.current.configure(config);\r\n    };\r\n    document.head.appendChild(script);\r\n\r\n    return () => {\r\n      if (xcheckoutRef.current !== null && typeof xcheckoutRef.current.destroy === 'function') {\r\n        xcheckoutRef.current.destroy();\r\n        xcheckoutRef.current = null;\r\n      }\r\n      document.head.removeChild(script);\r\n    };\r\n  }, [config, scriptSrc]);\r\n\r\n  const handleXCheckoutClick = (): void => {\r\n    if (xcheckoutRef.current !== null) {\r\n      xcheckoutRef.current.pay();\r\n    } else {\r\n      console.warn('XCheckout library is not yet loaded');\r\n    }\r\n  };\r\n\r\n  return {handleXCheckoutClick};\r\n}\r\n"],"names":["useRef","useEffect"],"mappings":";;;;AAKwB,SAAA,YAAY,CAAC,EAAC,MAAM,EAAE,SAAS,EAAqB,EAAA;AAC1E,IAAA,MAAM,YAAY,GAAGA,YAAM,CAA4B,IAAI,CAAC,CAAC;IAE7DC,eAAS,CAAC,MAAK;QACb,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;AAChD,QAAA,MAAM,CAAC,GAAG,GAAG,SAAS,CAAC;AACvB,QAAA,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC;AACpB,QAAA,MAAM,CAAC,MAAM,GAAG,MAAK;AACnB,YAAA,YAAY,CAAC,OAAO,GAAG,MAAM,CAAC,SAAS,CAAC;AACxC,YAAA,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;AACzC,SAAC,CAAC;AACF,QAAA,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;AAElC,QAAA,OAAO,MAAK;AACV,YAAA,IAAI,YAAY,CAAC,OAAO,KAAK,IAAI,IAAI,OAAO,YAAY,CAAC,OAAO,CAAC,OAAO,KAAK,UAAU,EAAE;AACvF,gBAAA,YAAY,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;AAC/B,gBAAA,YAAY,CAAC,OAAO,GAAG,IAAI,CAAC;AAC7B,aAAA;AACD,YAAA,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;AACpC,SAAC,CAAC;AACJ,KAAC,EAAE,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC,CAAC;IAExB,MAAM,oBAAoB,GAAG,MAAW;AACtC,QAAA,IAAI,YAAY,CAAC,OAAO,KAAK,IAAI,EAAE;AACjC,YAAA,YAAY,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;AAC5B,SAAA;AAAM,aAAA;AACL,YAAA,OAAO,CAAC,IAAI,CAAC,qCAAqC,CAAC,CAAC;AACrD,SAAA;AACH,KAAC,CAAC;IAEF,OAAO,EAAC,oBAAoB,EAAC,CAAC;AAChC;;;;"}