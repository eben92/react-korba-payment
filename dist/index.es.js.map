{"version":3,"file":"index.es.js","sources":["../libs/use-x-checkout.ts"],"sourcesContent":["import {useEffect, useRef, useState} from 'react';\nimport type {\n  XCheckoutRefProps,\n  XCheckoutHooksReturnProps,\n  UseXCheckoutProps,\n  XCheckoutConfigProps,\n} from './types';\n\n/**\n * Custom hook for integrating Korba XCheckout into a React component.\n *\n * @param scriptSrc - The source URL of the XCheckout script.\n * @returns An object containing the `pay` function and a boolean indicating whether XCheckout is loaded.\n *\n * @example\n * import { useXCheckout } from 'react-korba-payment';\n *\n * const { pay, isXCheckoutLoaded } = useXCheckout({ scriptSrc: 'https://paywithkorba.s3-eu-west-1.amazonaws.com/test-checkout.js' }); // replace with your XCheckout script URL\n *\n * @see UseXCheckoutProps\n * @see XCheckoutHooksReturnProps\n *\n * @see [Package Documentation](https://github.com/eben92/react-korba-payment#readme)\n * @see [Korba Documentation](https://xchange.korba365.com/docs/#xcheckout)\n */\nexport default function useXCheckout({scriptSrc}: UseXCheckoutProps): XCheckoutHooksReturnProps {\n  const xCheckoutRef = useRef<XCheckoutRefProps | null>(null);\n  const [isXCheckoutLoaded, setIsXCheckoutLoaded] = useState(false);\n\n  useEffect(() => {\n    const script = document.createElement('script');\n    script.src = scriptSrc;\n    script.async = true;\n    script.onload = () => {\n      xCheckoutRef.current = window.XCheckout;\n    };\n\n    const handleScriptLoad = () => {\n      xCheckoutRef.current = window.XCheckout;\n      setIsXCheckoutLoaded(true);\n    };\n\n    script.addEventListener('load', handleScriptLoad);\n    document.head.appendChild(script);\n\n    return () => {\n      if (xCheckoutRef.current !== null && typeof xCheckoutRef.current.destroy === 'function') {\n        xCheckoutRef.current.destroy();\n        xCheckoutRef.current = null;\n      }\n      document.head.removeChild(script);\n\n      setIsXCheckoutLoaded(false);\n    };\n  }, []);\n\n  /**\n   * Executes the XCheckout process with the provided configuration.\n   * If the XCheckout library is not yet loaded, a warning message is logged.\n   * @param config - The configuration object for XCheckout.\n   * @returns void\n   * @example\n   * const config = {\n   *  merchantID: 'merchant-id', // your merchant ID.\n   *  orderID: 'order-id', // unique order ID\n   *  description: 'description', // optional\n   *  amount: 100, // in GHâ‚µ\n   *  redirectURL: 'https://example.com/redirect',\n   * };\n   * onXCheckout(config);\n   * @see XCheckoutConfigProps\n   *\n   */\n  const pay = (config: XCheckoutConfigProps): void => {\n    if (xCheckoutRef.current !== null) {\n      xCheckoutRef.current.configure(config);\n\n      xCheckoutRef.current.pay();\n      return;\n    }\n\n    console.warn('XCheckout library is not yet loaded');\n  };\n\n  return {pay, isXCheckoutLoaded};\n}\n"],"names":[],"mappings":";;AAQA;;;;;;;;;;;;;;;;AAgBG;AACW,SAAU,YAAY,CAAC,EAAC,SAAS,EAAoB,EAAA;AACjE,IAAA,MAAM,YAAY,GAAG,MAAM,CAA2B,IAAI,CAAC,CAAC;IAC5D,MAAM,CAAC,iBAAiB,EAAE,oBAAoB,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;IAElE,SAAS,CAAC,MAAK;QACb,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;AAChD,QAAA,MAAM,CAAC,GAAG,GAAG,SAAS,CAAC;AACvB,QAAA,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC;AACpB,QAAA,MAAM,CAAC,MAAM,GAAG,MAAK;AACnB,YAAA,YAAY,CAAC,OAAO,GAAG,MAAM,CAAC,SAAS,CAAC;AAC1C,SAAC,CAAC;QAEF,MAAM,gBAAgB,GAAG,MAAK;AAC5B,YAAA,YAAY,CAAC,OAAO,GAAG,MAAM,CAAC,SAAS,CAAC;YACxC,oBAAoB,CAAC,IAAI,CAAC,CAAC;AAC7B,SAAC,CAAC;AAEF,QAAA,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE,gBAAgB,CAAC,CAAC;AAClD,QAAA,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;AAElC,QAAA,OAAO,MAAK;AACV,YAAA,IAAI,YAAY,CAAC,OAAO,KAAK,IAAI,IAAI,OAAO,YAAY,CAAC,OAAO,CAAC,OAAO,KAAK,UAAU,EAAE;AACvF,gBAAA,YAAY,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;AAC/B,gBAAA,YAAY,CAAC,OAAO,GAAG,IAAI,CAAC;aAC7B;AACD,YAAA,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;YAElC,oBAAoB,CAAC,KAAK,CAAC,CAAC;AAC9B,SAAC,CAAC;KACH,EAAE,EAAE,CAAC,CAAC;AAEP;;;;;;;;;;;;;;;;AAgBG;AACH,IAAA,MAAM,GAAG,GAAG,CAAC,MAA4B,KAAU;AACjD,QAAA,IAAI,YAAY,CAAC,OAAO,KAAK,IAAI,EAAE;AACjC,YAAA,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;AAEvC,YAAA,YAAY,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;YAC3B,OAAO;SACR;AAED,QAAA,OAAO,CAAC,IAAI,CAAC,qCAAqC,CAAC,CAAC;AACtD,KAAC,CAAC;AAEF,IAAA,OAAO,EAAC,GAAG,EAAE,iBAAiB,EAAC,CAAC;AAClC;;;;"}